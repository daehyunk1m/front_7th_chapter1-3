# 과제 3

### 필수 스펙

- 드래그 앤 드롭(D&D) 기능 개발
  - [x] 캘린더의 일정을 마우스로 끌어 다른 날짜나 시간으로 옮기는 기능을 구현합니다.
- 날짜 클릭으로 일정 생성 기능 개발
  - [x] 캘린더의 비어있는 날짜 셀을 클릭하면, 해당 날짜가 자동으로 폼에 채워지도록 하세요.

## 기본 과제

필수 스펙 개발과 E2E, 시각적 회귀 테스트를 모두 작성해주세요.

### 기본과제 제출

- 아래 작성된 E2E 테스트 작성은 필수입니다. 추가로 작성하고 싶다면 작성해주세요.
- 여기서 말하는 전반은 Create, Read, Update, Delete 모두에 해당합니다.

1. [x] 기본 일정 관리 워크플로우 전반을 검증하세요.
2. [x] 반복 일정 관리 워크플로우 전반을 검증하세요.
3. [x] 일정 겹침 처리 방식에 대해 검증하세요.
4. [x] 알림 시스템 관련 노출 조건에 대해 검증하세요.
5. [x] 검색 및 필터링 전반에 대해 검증하세요.

- 아래 시각적 회귀 테스트는 필수 입니다. 추가로 작성하고 싶다면 작성해주세요.

1. [x] 타입에 따른 캘린더 뷰 렌더링
2. [x] 일정 상태별 시각적 표현
3. [x] 다이얼로그 및 모달
4. [x] 폼 컨트롤 상태
5. [x] 각 셀 텍스트 길이에 따른 처리

```
♨️
이 과정에서 컴포넌트 리팩토링이 필요할 수 있습니다!
여유가 있다면 컴포넌트를 아름답게 분리하는 고민을 해주시면 좋지만,
당장은 적절한 스토리를 작성하는데 더 집중해주세요.
적절한 추상화, 응집도를 높이고 결합도를 낮추는
우아한 설계는 이후 주차때 좀 더 집중해봐요.
```

```
- 물론, AI를 활용해도 좋습니다.
- 기존에 작성한 테스트는 깨지지 않도록 해주세요.
  - 이 과정에서 테스트가 분리될 수도 작성법이 수정될 수도 있습니다.
  - 정말 불필요한 케이스가 아니면, 테스트 케이스를 삭제하는건 최소화 해주세요.
  - 추가로 필요한 테스트가 생길 수 있지만, 작성은 자유롭게 선택해서 진행해주세요.
```

## 심화 과제

테스트 전략 작성해보기의 내용을 참고해서 지금까지 작성했던 프로젝트에 대해 테스트 전략을 구상해보세요.

### 심화 과제 제출

#### 내가 생각한 최적의 테스트 전략은 무엇인지, 그리고 그 이유를 작성해주세요.

유저 플로우가 복잡하지 않았고 UI 의존성이 낮으며 일정을 다루는 로직이 곧 비즈니스 로직이라 생각했습니다.
코드 상으로도 로직이 잘 분리되어 단위 테스트 작성이 용이했고 자연스럽게 단위테스트의 비중이 많은 테스트 피라미드의 전략이 적합하다고 생각했습니다.

- 단위 테스트 60%: utils, 순수 로직
- 통합 테스트 30%: hooks + API 모킹, 주요 워크플로우
- E2E 테스트 10%: 크리티컬 시나리오 (반복 일정 생성→수정→삭제)

#### 팀원들이 합의한 최적의 테스트 전략은 무엇인지, 그리고 그 이유를 작성해주세요.

`App.tsx`에 컴포넌트들이 뭉쳐있고 각각 분리와 컴포넌트 검증이 추가로 필요해보였습니다.
각 컴포넌트와 유닛 간의 관계성에 대해 아직 정리되지 않아 단위 테스트론 신뢰성을 확보하기 어려웠으며
E2E로 테스트하기엔 기능적인 부분의 검증도 필요했습니다.

그래서 분할 시 컴포넌트 단위로 병렬 테스트도 할 수 있어 속도도 보장할 수 있는 통합 테스트를 늘려 보완하기로 했습니다.
하지만 `App.tsx`를 리팩토링하여 컴포넌트를 나누고 테스트 작성하는데 생각보다 시간이 부족했습니다.

대신 비즈니스 기능 도메인 별 통합테스트를 작성하여 영역별 명확한 분리와 주요 기능 테스트를 통해 제품의 신뢰성을 확보하고자 했습니다.

#### 그 전략에 맞춰 추가한 테스트는 무엇인지 나타내주세요.

```shell
# 폴더 구조
    ── integration/
      ├── eventManagementIntegration.spec.tsx # 이벤트 CRUD 통합
      ├── searchAndFilterIntegration.spec.tsx # 검색/필터링 통합
      ├── calendarViewIntegration.spec.tsx # 캘린더 뷰 통합
```

2명이 페어로 하나의 기능을 맡기로 합의했으며
저는 `eventManagementIntegration.spec.tsx` 에서 일정 이벤트 관련 통합 테스트를 작성했습니다.

테스트 전략 회의록

- [팀 1차 전략 논의](https://www.figma.com/board/VuNDna8IE25UWPHg2Qy6Mv/-3%EC%A3%BC%EC%B0%A8--%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%A0%84%EB%9E%B5-%EB%85%BC%EC%9D%98?node-id=0-1&p=f&t=90qyx4RtJ6hW9FAZ-0)
- [팀 2차 전략 논의](https://www.notion.so/teamsparta/3-2-2a22dc3ef5148036bea9e54ad80bb4e4?source=copy_link)
- [기능별 코드 공유](https://www.notion.so/teamsparta/3-2-2a22dc3ef5148036bea9e54ad80bb4e4?source=copy_link#2a32dc3ef51480f19b73f5d652eee775)

---

## 과제 셀프회고

<!-- 과제에 대한 회고를 작성해주세요 -->

### 기술적 성장

<!-- 예시
- 새로 학습한 개념
- 기존 지식의 재발견/심화
- 구현 과정에서의 기술적 도전과 해결
-->

vite를 사용하면서 이미 설치되어있던 vitest 덕분에 단위, 통합 테스트는 큰 실패 없이 쉽게 사용할 수 있었습니다.
그에 비해 이번 주차는 직접 테스트 패키지와 환경을 만져보며 구성할 수 있어야 했습니다.
playwright, storybook 등 테스트 툴의 차이도 잘 몰랐습니다.
이번 과제를 통해 E2E 테스트와 시각적 회귀 테스트를 도입할 수 있게 되었고 유저의 관점에서 더욱 신뢰도 있는 제품을 만들 수 있게됐습니다.

무엇보다 테스트 전략을 직접 팀원들과 결정하면서 테스트에 정답이 없고 테스트 전략을 잘 짜면 서비스의 핵심은 보장하면서 비용도 줄일 수 있음을 체감했습니다.

### 코드 품질

<!-- 예시
- 특히 만족스러운 구현
- 리팩토링이 필요한 부분
- 코드 설계 관련 고민과 결정
-->

지난 주차에서 에이전트의 편리함을 충분히 누려 이번에는 직접 작성하며 손에 익히는 연습을 하려 했습니다.
E2E테스트의 작성하며 초반엔 Playwright를 작성하는 법과 Codegen, Playwright Extension을 사용해서 요소를 시나리오대로 배치하고 POM을 사용하고 fixture를 설정하며 방법을 익히며 코드를 작성했습니다.

하지만 개인적으로 이번 주차엔 과제에 투자할 수 있는 시간이 적어서 이후 AI 에이전트의 도움을 너무 많이 받았습니다.
작동하기만을 위한 코드로 과제를 마무리하게되어 아쉬웠고 앞으로의 과제에선 보다 효율적으로 분배하여 코드 품질에 신경쓰고 싶습니다.

### 학습 효과 분석

<!-- 예시
- 가장 큰 배움이 있었던 부분
- 추가 학습이 필요한 영역
- 실무 적용 가능성
-->

개인적으로 디자인 시스템에 관심이 많습니다. 컴포넌트 관리하면 항상 storybook 주제로 나와 관심을 기울이고 있다가 이번 주차에 과제로 나와 좋았습니다. 이후 작업시에 꼭 storybook을 도입하여 관리와 Document 용으로 잘 사용해보고 싶어 지속적으로 연습해보려 합니다.

### 과제 피드백

<!-- 예시
- 과제에서 모호하거나 애매했던 부분
- 과제에서 좋았던 부분
-->

E2E와 시각적 회귀(스토리북) +@로 신규 feature의 통합 테스트까지 테스트 전략을 짜고 테스트를 구성 하는 프로세스를 쭉 밟아볼 수 있어 좋았습니다. 하나하나 중요한 내용이었는데, 아직 이해도가 낮고 패키지 경로와 같은 과제 내용 외의 문제가 발생해서 작업에 속도를 내지 못했고,
특히 팀 회의 때 더 자신있게 참여하고 싶었는데 진행도가 낮아 많이 참여하지 못한것이 아쉬웠습니다.

## 리뷰 받고 싶은 내용

<!--
피드백 받고 싶은 내용을 구체적으로 남겨주세요
모호한 요청은 피드백을 남기기 어렵습니다.

참고링크: https://chatgpt.com/share/675b6129-515c-8001-ba72-39d0fa4c7b62

모호한 요청의 예시)
- 코드 스타일에 대한 피드백 부탁드립니다.
- 코드 구조에 대한 피드백 부탁드립니다.
- 개념적인 오류에 대한 피드백 부탁드립니다.
- 추가 구현이 필요한 부분에 대한 피드백 부탁드립니다.

구체적인 요청의 예시)
- 현재 함수와 변수명을 보면 직관성이 떨어지는 것 같습니다. 함수와 변수를 더 명확하게 이름 지을 수 있는 방법에 대해 조언해주실 수 있나요?
- 현재 파일 단위로 코드가 분리되어 있지만, 모듈화나 계층화가 부족한 것 같습니다. 어떤 기준으로 클래스를 분리하거나 모듈화를 진행하면 유지보수에 도움이 될까요?
- MVC 패턴을 따르려고 했는데, 제가 구현한 구조가 MVC 원칙에 맞게 잘 구성되었는지 검토해주시고, 보완할 부분을 제안해주실 수 있을까요?
- 컴포넌트 간의 의존성이 높아져서 테스트하기 어려운 상황입니다. 의존성을 낮추고 테스트 가능성을 높이는 구조 개선 방안이 있을까요?
-->

단위 테스트를 제외한 대부분의 테스트가 React 컴포넌트와 관련된 테스트라고 생각됩니다.
보통, 프로젝트가 완전히 완료되지 않는다면 기능 추가나 디자인 변경으로 인해 컴포넌트 구조가 자주 변경될 것으로 예상됩니다

컴포넌트가 변경될 때마다 관련 테스트 코드를 수정해야 된다면 점점 부담이 커질텐데
테스트 유지보수에 드는 리소스 대비 효과가 적을 것 같다는 생각이 들었습니다.

1. 이런 상황에서 어떤 레벨의 테스트(단위/통합/E2E)를 우선적으로 도입하는 것이 효율적일까요?

2. 컴포넌트가 어느 정도 안정화되었다고 판단할 수 있는 구체적인 기준이 있을까요?

   - (예: 일정 기간 변경 없음, 특정 버전 릴리즈 후 등)

3. 변경에 강한 테스트를 작성하기 위한 구체적인 전략이나 패턴이 있을까요?
   - (예: 구현 세부사항보다 사용자 행동 중심으로 테스트하기 등)
